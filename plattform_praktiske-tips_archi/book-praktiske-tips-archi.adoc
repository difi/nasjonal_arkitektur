:lang: no
:doctitle: Praktiske tips om bruk av Archi
:keywords: Archi

include::../plattform_felles/includes/commonincludes.adoc[]


[.lead]
Archi er et gratis og open-source verktøy som støtter Archimate-standarden for arkitekturdokumentasjon, og har tillegg som muliggjør samarbeid rundt felles repository på Github.  

image:../plattform_praktiske-tips_archi/media/archi-logo.png[]
 
//image:../plattform_felles/media/i-arbeid.png[width=75, height=75] Uferdig innhold

////
////

== Generelt
Archi er gratis og i utbredt bruk både i Norge og internasjonalt. Det er derfor inntil videre valgt som samarbeidsplattform for arbeidet med Nasjonal arkitektur. 

Dette betyr ikke at andre verktøy ikke kan brukes. Archi mangler endel funksjonalitet som finnes i mange andre verktøy, så integrajoner på tvers av ulike verktøy er aktuelt.

== Archi repository på GitHub

Et felles Archi-repository for arbeidet med nasjonal arkitektur finnes på Github, her: https://github.com/nasjonal-arkitektur/archi-collab-nab.
Gi beskjed til nasjonalarkitektur@difi.no om du ønsker skriverettigheter til dette biblioteket.

NOTE: I tillegg til dette biblioteket, finnes andre modeller som du kanskjeogså er interessert i. Se  


== Installer og konfigurer Archi

1. *Last ned og installer Archi*
+
Last ned og installer siste versjon av Archi fra https://www.archimatetool.com/download/

2. *Konfigurer "diagram appearance"*
+
Det er generelt ønskelig at de fleste symboler har samme størrelse, Standard symbolstørrelse settes slik at det er plass til 4 linjer med "litt lange ord"; se figur nedenfor. Dette holder for de fleste formål. Det velges videre å bruke _gradienter_ i fargevisningen, fordi dette for mange oppleves som et mer "profesjonelt" uttrykk.
+
.Figur: Konvensjon for konfigurasjon av symbolstørrelser og fargegradient
image:../plattform_praktiske-tips_archi\media\preferences-appearance.png[]
+
.
  
3. *Konfigurer foretrukne Archi standardfigurer*
+
Det er sterkt ønskelig å standardisere på symbolbruken. Archimate-standarden gir valgmuligheter som kan forvirre. Foretrukne standardfigurer konfigureres under menyen Edit | Preferences | Diagram | Default Figures. Benytt da valg som vist i følgende figur.
+
.Figur: Konvensjon for konfigurasjon av _default figures_ i Archi
image:../plattform_praktiske-tips_archi/media/preferences-default-figures.png[width=600, height=600]

WARNING: Archi har per januar 2019 begrenset funksjonalitet for dette. En har f.eks, ikke noen alternativer for Actor. En kan heller ikke benytte egne symboler.

== Installer og konfigurer coArchi collaboration plugin

1. *Produktdokumentasjon*
+
Gjør deg gjerne kjent med brukerveiledningen på https://github.com/archimatetool/archi-modelrepository-plugin - det er ikke sikkert at oppskriften som følger på norsk her er komplett eller oppdatert. 

1. *Skaff deg en GitHub-bruker*
+
Du trenger en brukerkonto på GitHub. Dersom du ikke allerede har en GitHub-bruker, kan du skaffe deg det https://github.com/join?source=header[her].
+
Se eventuelt også link:../plattform_praktiske-tips_github/[praktiske tips om bruk av GitHub] for annen informasjon om GitHub (ikke nødvendig her).

3. *Last ned og installer Collaboration Plugin*
+
Last ned og installer CoArchi plugin fra  https://www.archimatetool.com/plugins/. Collaboration-menyen skal da komme til syne, slik: 
+
image:../plattform_praktiske-tips_archi/media/collaboration-plugin.png[width=450, height=450]
+

4. *Konfigurer Collaboration Plugin*
+
Sett inn ditt git brukernavn (Name) og e-post (Email), og mappe-navnet (#Collaboration Workspace folder#) der du ønsker at Archi skal legge filene når du importerer fra "Github-repoet". 
+
image:../plattform_praktiske-tips_archi/media/archi-collaboration-preferences.png[width=600, height=600]

== Importer Github-repository

Velg [underline]#Import Remote Model to Workspace# fra menyen under Collaboration i Archi, og oppgi https://github.com/nasjonal-arkitektur/archi-collab-nab
 som URL og oppgi ditt git brukernavn og passord.

NOTE: Det arbeides per høst 2020 med oppsplitting av det komplette biblioteket i flere deler, der det skilles mellom gjeldende versjon og ulike deler som enda ikke er kvalitetssikret og eventuelt kan tilhøre ulike organisasjoner. Se eget avsnitt om dette.


image:../plattform_praktiske-tips_archi/media/add-remote-model.png[width=550, height=550]


Når du klikker OK, vil det bli opprettet en mappe i filsystemet på din maskin med det aktuelle modellnavnet, som undermappe til den mappen du har satt opp i Preferences (se over).

Det vil dessuten komme til syne en linje i #Collaboration Workspace# med det aktuelle modellnavnet.

TIP: _Om du ikke får øye på panelet for Collaboration Workspace, kan du prøve Toggle Collaboration Workspace fra menyen. Det kan også hende at du finner panelet i en annen del av brukergrensesnittet (paneler kan flyttes på)._

image:../plattform_praktiske-tips_archi/media/collaboration-workspace.png[width=350, height=350]

Dobbeltklikk til slutt modellnavnet (eks. _nasjonalt-arkitekturbibliotek_) i Collaboration Workspace for å få det åpnet i _modelltreet_ (#Models#). 

== Endring og synkronisering
De endringene du gjør blir ikke synlige for andre før du publiserer endringene dine. Det finnes flere valg i Collaboration-menyen for synkronisering. Tips:

* Bruk [underline]#Refresh# om du bare vil laste ned endringer som andre har gjort (git pull).
* [underline]#Publish# gjør både Refresh, Commit og Publish - alt i ett.

_NB: Om flere jobber på de samme modellene samtidig, kan det bli behov for litt kompliserte "merge-operasjoner". Om du opplever problemer med dette, er det fint om du melder fra via en _issue_ i GitHub (eller per e-post til nasjonalarkitektur@difi.no).


== Tips for å finne og gjenåpne en lukket Archi-modell lokalt
Collaboration-plugin oppretter en .git undermappe som ikke uten videre er synlig, der det blant annet ligger en #temp.archimate# fil. Det er denne filen som åpnes i Archi når du har importert biblioteket. Nyttig å vite dersom du f.eks. har kommet til å lukke modellen fra workspace i Archi før du har publisert endringene dine. Det er altså bare å åpne denne filen, så kommer den opp i Archi, helt tilsvarende "normale" Archi-filer og med samme innhold som klonet og eventuelt modifisert modell.    

image:../plattform_praktiske-tips_archi/media/hidden-git-files.png[width=300, height=300]

== Avanserte tips om verktøyuavhengig samarbeid om Archimate-modeller

=== Generelt 
Arcimate-modeller kan utveksles mellom ulike verktøy gjennom et standardisert utvekslingsformat. Dette støttes av de fleste verktøy, og fungerer stort sett greit for engangs eksport-import og så lenge det ikke er gjort utvidelser i metamodellen (objekttyper, attributter, viewpoints).

En kan f.eks. uten videre eksportere views og objekter fra det nasjonale Archi- arkitekturbiblioteket og importere i Visual Paradigm. Ved første øyekast ser modellene ganske like ut.

=== Import av utvidelser - attributter
Nasjonalt arkitekturbibliotek benytter et uvidet sett av Archimate-attributter, slik dette støttes i verktøyet Archi. Hvordan få med disse ved import til et annet verktøy?

Måten å gjøre dette på vil variere fra verktøy til verktøy. Dette er bare delvis testet for import av modeller fra det Archi-baserte biblioteket som benyttes i Nasjonalt arkitekturbibliotek.

Eksempel: Ved import til Software AG ARIS, må en først utvide metamodellen i ARIS med identisk navnede attributter som i Archi. Straks disse er definert, fungerer importen uten videre.

=== Import av utvidelser - objekttyper

image:../plattform_felles/media/i-arbeid.png[width=45, height=45] TBD.

=== Gjentatt import og merge mellom ulike verktøy
For å få til "merge" med tidligere importerte modeller og objekter, kreves en form for merge-mekanisme som det per i dag ikke kan forventes at støttes ut-av-esken på tvers av ulike Archimate-verktøy.

image:../plattform_felles/media/i-arbeid.png[width=45, height=45] Uferdig innhold:


Foreløpig hypotese: Det er en overkommelig jobb å utvikle scripts eller programmer i ulike verktøy som gjør slik "merge" ved gjentatt import fra et annet verktøy, gitt et minimum av standardisering for aktuelle brukstilfeller. 

TIP: For gjentatt import og merge av objekter som kan være renavnet eller ha samme navn som andre objekter, kreves i praksis identifisering av objekter gjennom globalt unike identifikatorer. For at dette skal fungere, må en unngå utilsiktet endring av _globalt unike identifikatorer_ for objekter i kildesystemet.



== Avanserte tips for samarbeid om Archimate-innhold i verktøyet Archi

NOTE: Archi er gratis Open Source programvare, og støtter gjentatt import og merge av andre modeller fra og med Archi versjon 4.7.1 (juli 2020). Dette gir nye muligheter for gjenbruk og samarbeid, der involverte parter benytter samme verktøy.  Dette kan ikke forutsettes, men er tilfelle for noen sektorer og virksomheter i Norge og i EU per 2020.


=== Brukstilfelle 1: Integrer nasjonalt Archi-bibliotek i et personlig Archi-bibliotek


=== Brukstilfelle 2: Samarbeid med andre i din virksomhet om et Archi-bibliotek som er integrert med det nasjonale Archi-biblioteket
TBD.

=== Brukstilfelle 3: Integrer eksterne  Archi-biblioteker inn i det nasjonale Archi-biblioteket  
TBD.



== Archi scripts fra Difi for støtte til administrasjon og modellering
Difi har utviklet noen scripts for å effektivisere modellering og administrasjon av arkitekturbibliotek. Disse scriptene er gjort i jArchi med bruk av Archi-s Scripting Plugin, og krever installasjon av Archi-s Scripting Plugin for å kunne kjøres.

Se link:../nab_løsningslandskap_sbb_archi-scripts/[praktiske Archi scripts] for mer informasjon om funksjonalitet og praktisk bruk av disse scriptene.

== Andre plugins til Archi
Se http://archi-contribs.github.io/
