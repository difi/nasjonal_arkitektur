:lang: no
:doctitle: Mønstre for publisering 
:keywords: TBD
:toclevels: 3
include::../plattform_felles/includes/commonincludes.adoc[]

:leveloffset: +1

_Dette er en del  link:../nab_referanse_arkitekturer_datautveksling/[Referansearkitektur for datautveksling]_

//Henrik: hendelsesdata må defineres

= Introduksjon

Mønstre for publisering omfatter deling av både hendelsesdata og andre data.  

Eksempler på anvendelse:  

* Strømming av hendelsesdata i tilknytning til vedtak i offentlig saksbehandling.
* Strømming av IoT-data, enten periodisk eller hendelsesbasert.
* Oppdatering av kopier ved endringer i data.


// Ved publisering antas en løs kopling mellom datatilbyder og datakonsument, der 


= Generisk mønster for publisering

== Om dette mønsteret

_Generisk mønster for publisering_ beskriver det som er felles for ulike måter å publisere data på, enten det dreier seg om hendelsesdata eller andre data. 


== Grunnleggende konsepter for publisering av data og hendelser
// TIP: Her kommer en figur som illustrerer grunnleggende konsepter.

Ved publisering etableres en løs kopling mellom datatilbyder og datakonsument. Dette kan gjøres på flere måter. Noen eksempler:

a. Data stilles ut helt åpent, slik at hvem som vil kan konsumere data. Ulike tekniske løsninger for dette finnes. Referansearkitektur for eOppslag beskriver hvordan dette  dette kan gjøres gjennom API-er.

b. Data stilles ut åpent, men kan kun konsumeres av aktører med nødvendige rettigheter. Referansearkitektur for eOppslag beskriver hvordan dette  dette kan gjøres gjennom oppsett av rettigheter til API.

c. Datakonsument abonnerer på å få tilsendt oppdaterte data, med utgangspunkt i abonnementsavtale som spesifiserer hvilke data som ønskes.

d. Datakonsument abonnerer på notifikasjoner ved gitte hendelser.

e. Datakonsumenter henter selv inn notifikasjoner om hendelser ved å gjøre spørringer mot åpent tilgjengelige hendelseslister. 

////

men en grunnleggende egenskap er behovet for et mellomledd, eller en _datafordeler_, slik at datatilbyder ikke behøver å vite om datakonsumentene ved selve publiseringen. 


En helt annen sak er at det kreves tilgangsstyring ved lesing av data, og det kan være  behov for oppsett av avtaler og abonnementer mot _datafordeler_ for lesing av publiserte data. Det kan tilsvarende være behov for avtaler og tilgangsstyring mot datatilbyder, om det legges opp til  å kunne berike publiserte data med tillegginformasjon direkte fra datatilbyder. Det siste er typisk tilfelle ved publisering hendelsesdata, der det normalt vil gis en notifikasjon om hva som har skjedd, uten at alle detaljene gis straks.

Legg merke til at konseptet med en mellomliggende _datafordeler_ ikke utelukker at dette dekkes av datatilbyder selv. Dette er å oppfatte som en konseptuell arkitekturbyggekloss, og kan realiseres på ulike måter. Om det benyttes en ekstern tjeneste eller leverandør for _datafordeler_, introduseres imidlertid behov for avtaler mellom datatilbyder og _datafordeler_, i tillegg til tilsvarende mot datakonsument.
////

Figuren nedenfor illustrerer grunnleggende konsepter.

.Publisering av data og hendelser - grunnleggende konsepoter
image::../nab_referanse_arkitekturer_datautveksling_publisering/media/Publisering av data og hendelser - grunnleggende konsepoter.png[alt=Publisering av data og hendelser - grunnleggende konsepoter image]

Kommentarer til denne figuren:

* Figuren viser logiske flyten data og metadata. I en ren push-basert løsning vil dette tilsvare meldingsflyt, men i en pull-basert løsning er det datakonsumentene som tar initiativ til innhenting. 

* Rollen som _dataformidler_ kan være ivaretatt av datatilbyder selv, uten et eksternt mellomledd. 

* _Meglerløsning_ er her en konseptuell arkitekturbyggekloss, og kan være integrert i _fagsystem hos datatilbyder_.

* _Metadatakatalog_ benyttes for å finne fram til aktuelle datakilder, enten runtime eller designtime. Eksempel på løsning: Felles datakatalog.  

////
== Videre beskrivelser av generisk mønster for publisering 
image:../plattform_felles/media/i-arbeid.png[width=45, height=45] _I arbeid (høst 2019)_
////

= eNotifikasjon - strømming av hendelser
include::../nab_referanse_arkitekturer_epublisering/book-ra-epublisering.adoc[]


:leveloffset: -1
