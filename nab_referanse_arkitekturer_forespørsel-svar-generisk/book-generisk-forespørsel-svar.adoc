:lang: no
:doctitle: Generisk mønster for spørring og oppslag
:keywords: Referansearkitekturer

include::../plattform_felles/includes/commonincludes.adoc[]

//:erik2:

== Om dette mønsteret

_Generisk mønster for spørring og oppslag_ adresserer området _Deling av data på forespørsel_ og omhandler tilgjengeliggjøring av data og oppslag i data, som sett fra henholdvis datatilbyder og datakonsument.

Mønsteret dekker både asynkrone og synkrone oppslag, og det tas ikke stilling til kommunikasjonsprotokoll. Spørring og oppslag kan gjøres både mot data med ulike grader av tilgangsbegrensninger og mot åpne data helt uten tilgangsstyring.

////
Referansearkitekturen dekker både sikrede API-er og API-er som tilbyr åpent tilgjengelige data uten tilgangsbegrensninger. Begrepet API benyttes her i betydningen av et maskingrensesnitt som gir tilgang til data og funksjoner fra et system uavhengig av teknologi.
////

Mønsteret gir heller ingen begrensninger i hva slags informasjon det gjelder, om det er strukturerte eller ustrukturerte data, eller hva data skal brukes til. Tilbyder og konsument av data kan være på tvers av virksomheter eller innenfor samme virksomhet.

Eksempler på bruk:

* Oppslag i et felles dataregister, f.eks. Folkeregisteret.
* Oppslag av data hos en annen virksomhet .
* Oppslag av data i egen virksomhet.



== Kapabilitetskart - relevante kapabiliteter
Modellen under viser hovedinndelingen i kapabiliteter en tilbyder og en konsument må ha for å dele data gjennom spørring og oppslag. Dette er av området som omhandler _Deling av data på forespørsel_. 


.Kapabiliteter, deling av data på forespørsel
image::../nab_referanse_arkitekturer_datautveksling_forespørsel-svar/media/Kapabiliteter, deling av data på forespørsel.png[alt=Kapabiliteter, deling av data på forespørsel image]

Tilbyder må kunne tilgjengeliggjøre data og dette er delt i to kapabiliteter:

* _Tilgjengeliggjøre data_ omhandler hvordan man registerer og setter opp tilganger. 
* _Avgi data_ omhandler den operative delingen av data fra tilbyder.


Tilsvarende er det to detaljerte kapabiliteter tilknyttet konsument og det å innhente data: 

* _Få tilgang til data_ består av prosesser for oppsett av tilgang.
* _Innhente data_ er det konsumenten må gjøre hver gang det gjøres et oppslag.

I tillegg kan begge parter ha kapabiliteten:

* _Delegering av rettigheter til databehandler_ må gjøres dersom en av partene benytter seg av en databehandler.


[cols ="1,3", options="header"]
.Elementer i view for Kapabiliteter, forespørsel-svar
|===

| Element
| Beskrivelse

| Datatilbyder
| Tilbyder av data til andre aktører.

| Datakonsument
| Den som innhenter eller mottar data fra andre aktører.

| Delegere rettigheter til databehandler
| Evnen til å delegere rettigheter til databehandler som utfører oppgaver på vegne av behandlingsansvarlig.

| Tilgjengeliggjøre data
| Evnen til å gjøre data tilgjengelig for aktører utenfor egen virksomhet.

| Få tilgang til data (konsument)
| Evnen til å skaffe seg tilgang til tilbudte data fra annen aktør.

| Avgi data
| Evne til å avgi data på forespørsel. Kan omfatte tilgangsstyring.

| Innhente data
| Evnen til å innhente data fra en annen aktør.

|===


NOTE: Mer informasjon om kapabilitetskart og nedbrytingen av overordnede temaområder og kapabiliteter finnes under link:../nab_arkitekturlandskap[Nasjonalt arkitekturlandskap]. Her finnes _Deling av data på forespørsel_ som et eget område under området _Datautveksling_. 

// Her lå arkitekturmønster eOppslag

//// 
erik, andre notater: 

Bør vi ikke ha noe om logging?

Bør vi ikke peker på en fellesløsning (burde vært Altinn autorisasjon) også uten at det dreier seg om delegering? Kreveren oppdatering av kapabilitetskartet med en kapabilitete for autirsasjon



Begrepskapittel? Erik!!!!!

+ VI BØR HA SEPARAT BESKRIVELSE AV hvordan  referansearkitekturene inngår i samhandlingsprosesser  


1. Få på plass Eriks "gamle" figurer av overordnede beskrivelser i riktig Archi-bibliotek (påbegynt)


2. Fikse symboler og størrelsen på bokser og  "transiente farger"(påbegynt). OK

3. Fikse navn vs. label med linebreak osv.OK

4. Publisere Archi-html  (gjort) OK
5. Legge til lenker fra asciidoc-figurene til de publiserte archi-figurene OK

6.Fixe opp i diverse layout-grums i modellene ??????

7. Introduser egne service realization viewpoints per business service der detaljer om input/output og mapping til løsninger vises!!

småtteri  huskelap:
5. Rett opp fra default height 67 tli 70 i https://doc.difi.no/nasjonal-arkitektur/plattform_praktiske-tips/#_installer_og_konfigurer_archi 




////